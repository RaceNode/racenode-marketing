---
const appUrl = "https://app.racenode.com";

const freeModules = [
  { id: 'personal', name: 'Personal', icon: 'user', color: 'text-cyan-400', bg: 'bg-cyan-900/20', includedText: 'Included free', includedColor: 'text-green-400' },
  { id: 'staff', name: 'Staff', icon: 'users', color: 'text-green-400', bg: 'bg-green-900/20', includedText: 'Included free', includedColor: 'text-green-400' },
  { id: 'events', name: 'Events', icon: 'trophy', color: 'text-blue-400', bg: 'bg-blue-900/20', includedText: 'Included with Management & Logistics', includedColor: 'text-gray-400' },
  { id: 'fleet', name: 'Fleet', icon: 'van', color: 'text-yellow-400', bg: 'bg-yellow-900/20', includedText: 'Included with Logistics', includedColor: 'text-gray-400' },
  { id: 'racecars', name: 'Racecars', icon: 'car', color: 'text-red-400', bg: 'bg-red-900/20', includedText: 'Included with Management', includedColor: 'text-gray-400' },
];

const paidModules = [
  {
    id: 'management',
    name: 'Management',
    tagline: 'Event management, structured.',
    color: 'orange',
    features: [
      'Staff assignments with role definitions',
      'Racecar entries per event',
      'Team structure and crew composition',
      'Meal planning and allocation'
    ],
    href: '/management'
  },
  {
    id: 'logistics',
    name: 'Logistics',
    tagline: 'Event logistics, centralized.',
    color: 'purple',
    features: [
      'Multi-segment travel arrangements',
      'Accommodation with room management',
      'Smart alerts for missing bookings',
      'Document attachments for tickets and confirmations'
    ],
    href: '/logistics'
  }
];

const icons: Record<string, string> = {
  user: '<path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>',
  users: '<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>',
  trophy: '<path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>',
  van: '<path d="M8 6v6"/><path d="M15 6v6"/><path d="M2 12h19.6"/><path d="M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"/><circle cx="7" cy="18" r="2"/><path d="M9 18h5"/><circle cx="16" cy="18" r="2"/>',
  car: '<path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/>',
  'clipboard-check': '<rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="m9 14 2 2 4-4"/>',
  luggage: '<path d="M6 20h0a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h0"/><path d="M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14"/><path d="M10 20h4"/><circle cx="16" cy="20" r="2"/><circle cx="8" cy="20" r="2"/>',
  check: '<path d="M20 6 9 17l-5-5"/>'
};

const colorClasses = {
  orange: {
    bg: 'bg-orange-900/30',
    border: 'border-orange-700/50',
    iconBg: 'bg-orange-900/50',
    iconColor: 'text-orange-400',
    badgeBg: 'bg-orange-900/20',
    badgeText: 'text-orange-400',
    badgeBorder: 'border-orange-500/30'
  },
  purple: {
    bg: 'bg-purple-900/30',
    border: 'border-purple-700/50',
    iconBg: 'bg-purple-900/50',
    iconColor: 'text-purple-400',
    badgeBg: 'bg-purple-900/20',
    badgeText: 'text-purple-400',
    badgeBorder: 'border-purple-500/30'
  }
};
---

<section class="px-4 sm:px-6 lg:px-8 py-20 md:py-24 bg-gray-900/50">
  <div class="max-w-7xl mx-auto">
    <div class="text-center mb-12 md:mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
        Modules that work together.
      </h2>
      <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto">
        Start with the basics, add what you need. All modules share the same data.
      </p>
    </div>

    <!-- Base modules -->
    <div class="mb-12">
      <h3 class="text-center text-gray-400 text-sm uppercase tracking-wider mb-6">Base modules</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 max-w-4xl mx-auto">
        {freeModules.map((module) => (
          <div class="bg-gray-900 border border-gray-800 rounded-xl px-5 py-4 flex items-center gap-3">
            <div class={`${module.bg} w-10 h-10 rounded-lg flex items-center justify-center border border-gray-700 shrink-0`}>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class={`h-5 w-5 ${module.color}`}
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                set:html={icons[module.icon]}
              />
            </div>
            <div class="min-w-0">
              <div class="text-white font-medium">{module.name}</div>
              <div class={`${module.includedColor} text-xs leading-tight`}>{module.includedText}</div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Paid modules -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 max-w-5xl mx-auto">
      {paidModules.map((module) => {
        const colors = colorClasses[module.color as keyof typeof colorClasses];
        return (
          <div class={`${colors.bg} rounded-2xl p-6 md:p-8 border ${colors.border}`}>
            {/* Header */}
            <div class="flex items-center gap-4 mb-4">
              <div class={`${colors.iconBg} w-14 h-14 rounded-xl flex items-center justify-center border ${colors.badgeBorder}`}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class={`h-7 w-7 ${colors.iconColor}`}
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  set:html={icons[module.color === 'orange' ? 'clipboard-check' : 'luggage']}
                />
              </div>
              <div>
                <h3 class="text-xl font-bold text-white">{module.name}</h3>
                <p class={`text-sm ${colors.badgeText}`}>{module.tagline}</p>
              </div>
            </div>

            {/* Features */}
            <ul class="space-y-2 mb-6">
              {module.features.map((feature) => (
                <li class="flex items-start gap-2 text-sm">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    set:html={icons.check}
                  />
                  <span class="text-gray-300">{feature}</span>
                </li>
              ))}
            </ul>

            {/* Link */}
            <a
              href={module.href}
              class={`inline-flex items-center gap-2 ${colors.badgeText} hover:underline text-sm font-medium`}
            >
              Learn more
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14"/>
                <path d="m12 5 7 7-7 7"/>
              </svg>
            </a>
          </div>
        );
      })}
    </div>
  </div>
</section>
