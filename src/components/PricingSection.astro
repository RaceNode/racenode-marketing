---
interface PricingPlan {
  id: string;
  name: string;
  color: 'orange' | 'purple';
  currentPrice: number;
  regularPrice: number;
  includedModules: { name: string; icon: string }[];
  features: { text: string; comingSoon?: boolean }[];
}

const plans: PricingPlan[] = [
  {
    id: 'management',
    name: 'Management',
    color: 'orange',
    currentPrice: 99.99,
    regularPrice: 149.99,
    includedModules: [
      { name: 'Racecars', icon: 'car' },
      { name: 'Events', icon: 'trophy' },
    ],
    features: [
      { text: "Connect data from Staff, Racecars & Events" },
      { text: "Instantly synced to each team member's Personal module" },
      { text: 'Team structure with role assignments' },
      { text: 'Meal planning & staff allocation' },
      { text: 'Team timetable', comingSoon: true },
    ],
  },
  {
    id: 'logistics',
    name: 'Logistics',
    color: 'purple',
    currentPrice: 99.99,
    regularPrice: 149.99,
    includedModules: [
      { name: 'Fleet', icon: 'van' },
      { name: 'Events', icon: 'trophy' },
    ],
    features: [
      { text: 'Connect data from Staff, Fleet & Events' },
      { text: "Instantly synced to each team member's Personal module" },
      { text: 'Multi-segment travel arrangements' },
      { text: 'Accommodation with room management' },
      { text: 'Smart alerts for missing logistics' },
    ],
  },
];

const icons: Record<string, string> = {
  'clipboard-check': '<rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="m9 14 2 2 4-4"/>',
  luggage: '<path d="M6 20h0a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h0"/><path d="M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14"/><path d="M10 20h4"/><circle cx="16" cy="20" r="2"/><circle cx="8" cy="20" r="2"/>',
  car: '<path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/>',
  trophy: '<path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>',
  van: '<path d="M8 6v6"/><path d="M15 6v6"/><path d="M2 12h19.6"/><path d="M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"/><circle cx="7" cy="18" r="2"/><path d="M9 18h5"/><circle cx="16" cy="18" r="2"/>',
  check: '<path d="M20 6 9 17l-5-5"/>',
};

const colorClasses = {
  orange: {
    bg: 'bg-orange-900/50',
    border: 'border-orange-700',
    iconBg: 'bg-orange-900',
    iconColor: 'text-orange-400',
  },
  purple: {
    bg: 'bg-purple-900/50',
    border: 'border-purple-700',
    iconBg: 'bg-purple-900',
    iconColor: 'text-purple-400',
  },
};
---

<section id="pricing" class="px-4 sm:px-6 lg:px-8 py-20 md:py-24">
  <div class="max-w-5xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-12 md:mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
        Simple, Transparent Pricing
      </h2>
      <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto">
        Choose the modules you need. No hidden fees, no surprises.
      </p>
    </div>

    <!-- Early Adopter Banner -->
    <div class="bg-green-900/30 border border-green-700 rounded-xl p-4 md:p-6 mb-10 text-center">
      <p class="text-green-400 font-semibold text-lg md:text-xl mb-2">
        Early Adopter Offer
      </p>
      <p class="text-gray-300 text-sm md:text-base">
        Subscribe before <span class="font-semibold text-white">April 1st, 2026</span> and lock in the reduced price
        <span class="text-green-400 font-medium">for as long as you stay subscribed</span>.
      </p>
    </div>

    <!-- Pricing Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
      {plans.map((plan) => {
        const colors = colorClasses[plan.color];
        return (
          <div class={`${colors.bg} rounded-2xl p-6 md:p-8 border ${colors.border}`}>
            {/* Plan Header */}
            <div class="flex items-center gap-4 mb-6">
              <div class={`${colors.iconBg} w-14 h-14 rounded-xl flex items-center justify-center`}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class={`h-7 w-7 ${colors.iconColor}`}
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  set:html={icons[plan.color === 'orange' ? 'clipboard-check' : 'luggage']}
                />
              </div>
              <h3 class="text-2xl font-bold text-white">{plan.name}</h3>
            </div>

            {/* Pricing */}
            <div class="mb-6">
              <div class="flex items-baseline gap-2 mb-1">
                <span class="text-4xl md:text-5xl font-bold text-white">{plan.currentPrice}&euro;</span>
                <span class="text-gray-400 text-lg">/month</span>
              </div>
              <p class="text-gray-500 text-sm">
                <span class="line-through">{plan.regularPrice}&euro;/month</span>
                <span class="text-green-400 ml-2">Save {(plan.regularPrice - plan.currentPrice).toFixed(2)}&euro;/month</span>
              </p>
            </div>

            {/* Features */}
            <div class="border-t border-gray-700 pt-6 mb-6">
              <p class="text-gray-400 text-sm font-medium mb-4">Key features:</p>
              <ul class="space-y-2">
                {plan.features.map((feature) => (
                  <li class="flex items-start gap-2 text-sm">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      set:html={icons.check}
                    />
                    <span class={feature.comingSoon ? 'text-gray-400' : 'text-gray-300'}>
                      {feature.text}
                      {feature.comingSoon && (
                        <span class="ml-2 text-xs bg-gray-700 text-gray-400 px-2 py-0.5 rounded-full">
                          Coming soon
                        </span>
                      )}
                    </span>
                  </li>
                ))}
              </ul>
            </div>

            {/* Included Modules */}
            <div class="border-t border-gray-700 pt-6">
              <p class="text-gray-400 text-sm font-medium mb-4">Includes access to:</p>
              <ul class="space-y-3">
                {plan.includedModules.map((module) => (
                  <li class="flex items-center gap-3 text-white">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-5 w-5 text-green-500 flex-shrink-0"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      set:html={icons.check}
                    />
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-5 w-5 text-gray-400"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      set:html={icons[module.icon]}
                    />
                    <span>{module.name}</span>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        );
      })}
    </div>

    {/* Additional Info */}
    <div class="mt-10 text-center">
      <p class="text-gray-400 text-sm md:text-base">
        All prices are per organization, per month. Staff, Personal and base modules are always included for free.
      </p>
    </div>
  </div>
</section>
