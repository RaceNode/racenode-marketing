---
import { Image } from 'astro:assets';
import screenshotOverview from '../../assets/screenshots/management-overview.png';
import screenshotStaff from '../../assets/screenshots/management-event-staff.png';
import screenshotRacecars from '../../assets/screenshots/management-racecars.png';
import screenshotTeam from '../../assets/screenshots/management-team.png';
import screenshotMeals from '../../assets/screenshots/management-meals.png';

const screenshots = {
  overview: screenshotOverview,
  staff: screenshotStaff,
  racecars: screenshotRacecars,
  team: screenshotTeam,
  meals: screenshotMeals,
};

const features = [
  {
    id: "overview",
    badge: "Overview",
    title: "Your event at a glance.",
    description: "See instantly how many staff are assigned, which racecars are entered, how teams are composed, and how many meals are planned. One dashboard, one Event, everything visible.",
    icon: "eye"
  },
  {
    id: "staff",
    badge: "Event Staff",
    title: "Your full crew, roles and meals included.",
    description: "See every team member assigned to the event with their role and meal status. Staff assignments sync with Logistics — assign once, visible everywhere. No duplicate entries across modules.",
    icon: "user-check"
  },
  {
    id: "racecars",
    badge: "Racecars",
    title: "Assign your cars to each event.",
    description: "Assign racecars from your central fleet to each event. Car data comes from the Racecar module — chassis, model, race number — no need to re-enter anything. See at a glance which cars are entered for each weekend.",
    icon: "car"
  },
  {
    id: "team",
    badge: "Team",
    title: "Build your crew structure, event by event.",
    description: "Define your team structure once — team-level roles, car-level roles — then populate it per event. Assign Race Engineers, Car Chiefs, Performance Engineers to specific cars with a dropdown. When your crew changes between events, just reassign. The structure stays, the people adapt.",
    icon: "user-cog"
  },
  {
    id: "meals",
    badge: "Meals",
    title: "Plan every meal across the event.",
    description: "Plan breakfast, lunch, and dinner for every day of the event. Set locations, time windows, and assign staff to each meal. Your team knows where to eat, when, every day — without asking.",
    icon: "utensils"
  }
];

const icons: Record<string, string> = {
  "eye": `<path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"/><circle cx="12" cy="12" r="3"/>`,
  "user-check": `<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><polyline points="16 11 18 13 22 9"/>`,
  "car": `<path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/>`,
  "user-cog": `<circle cx="18" cy="15" r="3"/><circle cx="9" cy="7" r="4"/><path d="M10 15H6a4 4 0 0 0-4 4v2"/><path d="m21.7 16.4-.9-.3"/><path d="m15.2 13.9-.9-.3"/><path d="m16.6 18.7.3-.9"/><path d="m19.1 12.2.3-.9"/><path d="m19.6 18.7-.4-1"/><path d="m16.8 12.3-.4-1"/><path d="m14.3 16.6 1-.4"/><path d="m20.7 13.8 1-.4"/>`,
  "utensils": `<path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3zm0 0v7"/>`
};
---

<section class="px-4 sm:px-6 lg:px-8 py-20 md:py-24">
  <div class="max-w-7xl mx-auto">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
        Five tools, one workspace.
      </h2>
    </div>

    <div class="space-y-20 md:space-y-28">
      {features.map((feature, index) => (
        <div class={`flex flex-col ${index % 2 === 0 ? 'lg:flex-row' : 'lg:flex-row-reverse'} gap-8 lg:gap-12 items-center`}>
          <!-- Content -->
          <div class="lg:w-1/2">
            <div class="inline-flex items-center gap-2 px-3 py-1 bg-orange-900/20 text-orange-400 rounded-full text-sm font-medium mb-4 border border-orange-500/30">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-4 h-4"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                set:html={icons[feature.icon]}
              />
              {feature.badge}
            </div>
            <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">
              {feature.title}
            </h3>
            <p class="text-gray-400 text-lg leading-relaxed">
              {feature.description}
            </p>
          </div>

          <!-- Screenshot -->
          <div class="lg:w-1/2">
            <div class="rounded-xl overflow-hidden shadow-2xl shadow-orange-500/10">
              <Image
                src={screenshots[feature.id as keyof typeof screenshots]}
                alt={`RaceNode ${feature.badge} - ${feature.title}`}
                class="w-full h-auto"
                loading="lazy"
                quality={85}
              />
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
